(function(b){var a={init:function(c){},form_navigate:function(){if(b("input#form_multi_page_nav").val()!=""){b("form[name=job_application]").submit()}},application_form_navigate_next:function(){b("input#form_multi_page_nav").val("next");b(this).employment("form_navigate")},application_form_navigate_back:function(){b("input#form_multi_page_nav").val("back");b(this).employment("form_navigate")},application_form_navigate_complete:function(){b("input#form_multi_page_nav").val("complete");b(this).employment("form_navigate")},application_form_navigate_page:function(c){if(parseInt(c)>0){b("input#form_multi_page_nav").val(c);b(this).employment("form_navigate")}},application_update:function(d){var c="You cannot make any changes to a completed application.\n\n";c+="By pressing the OK button, this application will be taken out of consideration ";c+="for the position while you make the necessary changes. When you are finished ";c+="making changes, you will have the opportunity to submit the application again.";c+="\n\n";c+="Press OK if you wish to proceed.";if(confirm(c)){b.ajax("/apply/update.json",{type:"post",data:{id:d},success:function(f,g,e){if(f.success){location.href="/apply/"+d}else{alert("Sorry, there was a problem with this operation:\n\n"+f.error)}}})}},enable_application_select:function(){if("new"==b(this).val()){b("select#select_app_id").prop("disabled",true)}else{if("app"==b(this).val()){b("select#select_app_id").prop("disabled",false)}}},toggle_application_selection:function(){if(b("div#div-app-select")[0]){b("div#div-app-select").slideToggle()}},add_employer_block:function(){var c=0;b("div.employment div.content").each(function(){c++});b.ajax("/apply/getemployerblock",{type:"post",data:{index:c},success:function(e,f,d){b("#employerinfo").append(e);b("#employer_company_name_"+c).focus()}})},remove_employer_block:function(){var c=b(this).parent().parent();b(c).slideUp(function(){b(c).remove()});return false},change_stillworkhere:function(){var c=b(this).is(":checked");this.parent().find("select.employed-to").each(function(d,e){if(c){b(e).attr("disabled","disabled")}else{b(e).removeAttr("disabled")}})},toggle_help:function(){var c=this;this.parent().next("div").slideToggle(function(){if("formatting help"==b(c).text()){b(c).text("hide help")}else{b(c).text("formatting help")}})},update_dept_selection:function(){var c=b(this).is(":checked");this.parent().find("input[name^=appfordept]").each(function(d,e){if("appfordept_any"!=b(e).attr("name")){if(c){b(e).prop("checked",false);b(e).prop("disabled",true)}else{b(e).prop("disabled",false)}}})},toggle_hdyfu_other:function(){if("other"==b(this).val()){b("#hdyfu").slideDown(function(){b("#howdidyoufindus_other").focus()})}else{b("#hdyfu").slideUp()}},toggle_convictedofcrime:function(){if("yes"==b(this).val()){b("#convictedofcrime_explaindiv").slideDown()}else{b("#convictedofcrime_explaindiv").slideUp()}},toggle_beenfired:function(){if("yes"==b(this).val()){b("#beenfired_explaindiv").slideDown()}else{b("#beenfired_explaindiv").slideUp()}},toggle_selected_resume_type:function(){switch(b(this).val()){case"text":b("#div_resume_upload").slideUp(function(){b("#div_resume_text").slideDown()});break;case"upload":b("#div_resume_text").slideUp(function(){b("#div_resume_upload").slideDown()});break;default:}},show_resume_upload_dialog:function(){if(b("#resumeuploaddialog")[0]){b("#resumeuploaddialog").slideUp(100,function(){b(this).remove()})}var h=b("#id").val();var f=b("#resume_file").val();var o="font-size: 12px; margin-right: 5px;";var j=b("<div />",{id:"resumeuploaddialog",style:"display: none; width: 425px"}).addClass("dialog");var g=b("<div />",{id:"content"}).addClass("employment");var n=this;var e=b(this).offset();j.css({top:e.top+(b(this).height()+10)+"px"});j.css({left:e.left-(parseInt(j.css("width"))-b(this).width()+10)+"px"});if(f.length>0){g.html("<h3>Upload Your Resum&eacute</h3><p>You currently have a resum&eacute on file for this application.</p><p>If you would like to upload a newer version of your resume, select a file then press the <strong>Upload</strong> button. Only PDF files are allowed.</p>")}else{g.html("<h3>Upload Your Resum&eacute</h3><p>You do not currently have a resum&eacute on file for this application.</p><p>To upload your resume, select the file then press the <strong>Upload</strong> button. Only PDF files are allowed.</p>")}var p=b("<a />",{id:"buttoncancel",href:"javascript:void(0)",style:o}).addClass("button").html("Cancel");p.click(function(){b("#resumeuploaddialog").slideUp(100,function(){b(this).remove()})});var r=b("<a />",{id:"buttonupload",href:"javascript:void(0)",style:o}).addClass("button").html("Upload");b(r).click(function(){if(b("#resumefile").val().length>0){var w=b("form#uploadresumeform");var u="Warning: you currently have a resume on file!\n\n";u+="If you choose to continue, the version of the resume you have uploaded will be removed.\n\n";u+="Press OK if you wish to proceed.";if(f.length==0||confirm(u)){w.submit();b("#resumeuploaderror").slideUp(function(){b("#resumeuploadsuccess").html("uploading resum&eacute, please wait...");b("#resumeuploadsuccess").slideDown()});var v=0;var s=setInterval(function(){var t=b("iframe#resumeuploadiframe").contents().find("div#fileuploadresponse");if(null!=t){clearInterval(s);var A=b(t).find("#success").text();if(A=="1"){var z="/apply/"+h+"/downloadresume";b("#resumeuploadmessage").html('<strong><em>Successfully uploaded your resum&eacute;. Click <a href="'+z+'">here</a> to view it.</em></strong>');var y=b(t).find("#file").text();b("#resume_file").val(y);b("#resumeuploaddialog").slideUp(100,function(){b(this).remove()})}else{var x=b(t).find("#error").text();var B="";switch(x){case"UPLOAD_TYPE_NOT_ALLOWED":B="Sorry, only PDF files are allowed.";break;case"UPLOAD_FILE_TOO_BIG":B="The file you tried to upload is too big, only files smaller than 10MiB are allowed.";break;case"UPLOAD_FILE_NAME_INVALID":case"UPLOAD_ERROR_MOVING_FILE":default:B="Unkown error uploading file, please try again."}b("#resumeuploadsuccess").fadeOut(function(){b("#resumeuploaderror").html(B);b("#resumeuploaderror").fadeIn()})}}if(v++>600){clearInterval(s);b("#resumeuploadsuccess").fadeOut(function(){b("#resumeuploaderror").html("Timeout, aborting file upload.");b("#resumeuploaderror").fadeIn()})}},500)}}else{b("#resumeuploaderror").html("Please select a file first!");b("#resumeuploaderror").fadeIn()}});var m=b("<input />",{type:"hidden",name:"appid",id:"appid",value:h});var i=b("<input />",{type:"file",name:"resumefile",id:"resumefile",size:"30",style:"width: 100%"});b(i).click(function(){b("#resumeuploadsuccess").hide();b("#resumeuploaderror").hide()});var d=b("<iframe />",{id:"resumeuploadiframe",name:"resumeuploadiframe",style:"display: none;"});var q=b("<div />",{id:"resumeuploadsuccess",style:"display: none;"});var l=b("<div />",{id:"resumeuploaderror",style:"display: none;"});var c=b("<form />",{id:"uploadresumeform",method:"POST",action:"/apply/uploadresume",target:"resumeuploadiframe",enctype:"multipart/form-data"});c.append(m);c.append(i);c.append(b("<br />"));var k=b("<div />",{id:"uploadbuttons",style:"margin-bottom: 5px; margin-top: 5px;"});k.append(r);k.append(p);c.append(k);c.append(d);g.append(c);g.append(q);g.append(l);j.append(g);b("#center").append(j);j.slideDown(100)}};b.fn.employment=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.employment")}}};b("a#show_app_selection").click(function(){b(this).employment("toggle_application_selection")})})(jQuery);