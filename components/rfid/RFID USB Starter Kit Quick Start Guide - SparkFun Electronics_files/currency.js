(function(b){var a={init:function(c){},render:function(){var g=SFECONFIG.preferred_currency;var e=SFECONFIG.currencies[g];var c=(e.symbol_left!=null)?e.symbol_left:"";var f=(e.symbol_right!=null)?e.symbol_right:"";var d=function(i,h){value=(i*h.value);output=c+value.toFixed(h.decimal_places)+f;if(value<0){output="-"+c+(value*-1).toFixed(h.decimal_places)+f}return output};b("span.price").each(function(h,i){if(!b(i).hasClass("calculated")){b(i).html(d(parseFloat(i.innerHTML.replace(/[^\d\.]+/,"")),e));b(i).addClass("calculated")}})},change:function(c){if(!window.SFECONFIG.auth){currency=c;b.cookie("currency",c,{path:"/"})}new b.post("/currency/change_currency.json",{currency_code:c},function(d){if(d.status==true){location.reload()}else{alert("There was an error changing "+c+" to your default currency: "+d);return(false)}})},add:function(c){if(!window.SFECONFIG.auth){alert("You must be logged in to add a new currency.");return(false)}new b.post("/currency/add_currency.json",{currency_code:c},function(d){if(d.status==true){location.reload()}else{alert("There was an error adding "+c+" to your preferred currencies: "+d);return(false)}})},remove:function(c){if(!window.SFECONFIG.auth){alert("You must be logged in to remove a currency.");return(false)}new b.post("/currency/remove_currency.json",{currency_code:c},function(d){if(d.status==true){location.reload()}else{alert("There was an error removing"+c+" from your preferred currencies: "+d);return(false)}})}};b.fn.currency=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.currency")}}}})(jQuery);