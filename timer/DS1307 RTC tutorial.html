<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0056)http://www.ladyada.net/learn/breakoutplus/ds1307rtc.html -->
<html><!-- InstanceBegin template="/Templates/bobplus.dwt" codeOutsideHTMLIsLocked="false" --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="alternate" type="application/rss+xml" title="ladyada.net blog  RSS Feed" href="http://www.ladyada.net/feed/">
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./DS1307 RTC tutorial_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7723544-2");
pageTracker._trackPageview();
} catch(err) {}</script> 

<!-- InstanceBeginEditable name="overlib" -->
<script type="text/javascript" src="./DS1307 RTC tutorial_files/overlib.js"><!-- overLIB (c) Erik Bosrup --></script><link type="text/css" rel="stylesheet" href="data:text/css,">
<!-- InstanceEndEditable -->
<meta http-equiv="imagetoolbar" content="no">
<link rel="stylesheet" href="./DS1307 RTC tutorial_files/make.css" type="text/css">
<link rel="stylesheet" href="./DS1307 RTC tutorial_files/skeleton.css" type="text/css">

<!-- InstanceBeginEditable name="doctitle" -->
<title>DS1307 RTC tutorial</title>
<!-- InstanceEndEditable --><!-- InstanceBeginEditable name="head" -->
<link rel="stylesheet" media="all" type="text/css" href="./DS1307 RTC tutorial_files/css.php">
<link rel="stylesheet" media="screen" type="text/css" href="./DS1307 RTC tutorial_files/css(1).php">
<link rel="stylesheet" type="text/css" href="./DS1307 RTC tutorial_files/wiki.css">
<!-- InstanceEndEditable -->
<script>window["_GOOG_TRANS_EXT_VER"] = "1";</script><script>window["_GOOG_TRANS_EXT_VER"] = "1";</script></head>

<body>

    <div id="overDiv" style="position:absolute; visibility:hidden; z-index:1000;"></div>
  
<!-- InstanceBeginEditable name="badge" -->
<div class="topheader"><img src="./DS1307 RTC tutorial_files/topheaderbadge.png" width="171" height="190"></div>
<!-- InstanceEndEditable -->
<span class="topheadertext"><!-- InstanceBeginEditable name="heading" -->DS1307 RTC<!-- InstanceEndEditable --></span>
<span class="topsubheadertext"><!-- InstanceBeginEditable name="Subheading" -->Real time clock mini-breakout<!-- InstanceEndEditable --></span>

<ul id="menu">
	<li class="first"></li> 
  
    <li>
      <div class="menuitemtext"><a href="http://www.ladyada.net/learn/breakoutplus/index.html">Overview</a></div>
    </li>
  
    <li>
      <div class="menuitemtext"><a href="./DS1307 RTC tutorial_files/DS1307 RTC tutorial.html">DS1307</a></div>
    </li>
  
    <li>
      <div class="menuitemtext"><a href="http://www.ladyada.net/learn/sensors/thermocouple.html">MAX6675</a></div>
    </li>
  
    <li>
      <div class="menuitemtext"><a href="http://www.ladyada.net/learn/breakoutplus/ftdifriend.html">FT232RL</a></div>
    </li>
  
    <li>
      <div class="menuitemtext">microSD</div>
    </li>
  
    <li>
      <div class="menuitemtext"><a href="http://forums.ladyada.net/">Forums</a></div>
    </li>
  
    <li>
      <div class="menuitemtext"><a href="http://www.adafruit.com/index.php?main_page=index&cPath=42">Buy BB+</a></div>
    </li>
  
	<li class="last"></li>
</ul>

<ul id="nav">

<li><a href="http://www.ladyada.net/">Home</a></li>

<li><a href="http://www.ladyada.net/about.html">About<!--[if gte IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
<ul>
	<li><a href="http://www.ladyada.net/about.html">ladyada.net</a></li>
	<li><a href="http://www.ladyada.net/portfolio/2007/index.html">Portfolio</a></li>
	<li><a href="http://www.ladyada.net/pub/research.html">Research</a></li>
	<li><a href="http://www.ladyada.net/pub/press.html">Press</a></li>
	<li><a href="http://www.ladyada.net/pub/pub.html">Publication &amp; Presentation</a></li>
	<li><a href="http://www.flickr.com/photos/ladyada/">Photos</a></li>
	<li><a href="http://www.ladyada.net/wiki">Wiki (backend)</a></li>
	</ul>
<!--[if lte IE 6]></td></tr></table></a><![endif]-->
</li>

<li><a href="http://www.ladyada.net/make/">Projects<!--[if gte IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
<ul>
	<li><a href="http://www.ladyada.net/learn/breakoutplus/ds1307rtc.html#nogo">Arduino »<!--[if gte IE 7]><!--></a><!--<![endif]-->
	<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul>
    	<li><a href="http://www.ladyada.net/make/logshield/">Datalogger&nbsp;Shield</a></li>
	    <li><a href="http://www.ladyada.net/make/eshield/">Ethernet&nbsp;Shield</a></li>
	    <li><a href="http://www.ladyada.net/make/gpsshield/">GPS&nbsp;Shield</a></li>
	  	<li><a href="http://www.ladyada.net/make/pshield/">Proto&nbsp;Shield</a></li>
	  	<li><a href="http://www.ladyada.net/make/mshield/">Motor&nbsp;Shield</a></li>
	  	<li><a href="http://www.ladyada.net/make/waveshield/">Wave&nbsp;Shield</a></li>
	  </ul>
	<!--[if lte IE 6]></td></tr></table></a><![endif]-->
	</li><li><a href="http://www.ladyada.net/make/bbpsup/">Adj.&nbsp;power&nbsp;supply</a></li>
	<li><a href="http://www.ladyada.net/make/brain/">Brain&nbsp;Machine</a></li>
	<li><a href="http://www.ladyada.net/make/boarduino/">BoArduino</a></li>
	<li><a href="http://www.ladyada.net/make/digg/">DIGG&nbsp;Button</a></li>
	<li><a href="http://www.ladyada.net/make/drawdio/">Drawdio</a></li>
    <li><a href="http://www.ladyada.net/make/fuzebox/">Fuzebox</a></li>
    <li><a href="http://www.ladyada.net/make/gamegrrl/">Game&nbsp;Grrl</a></li>
	<li><a href="http://www.ladyada.net/make/conway/">Game&nbsp;of&nbsp;Life</a></li>
	<li><a href="http://www.ladyada.net/make/icetube/">Ice&nbsp;Tube&nbsp;clock</a></li>
    <li><a href="http://www.ladyada.net/make/midisense/">MIDIsense</a></li>
	<li><a href="http://www.ladyada.net/make/minipov2/">MiniPOV2</a></li>
	<li><a href="http://www.ladyada.net/make/minipov3/">MiniPOV3</a></li>
	<li><a href="http://www.ladyada.net/make/minty/">MintyMP3</a></li>
	<li><a href="http://www.ladyada.net/make/mintyboost/">MintyBoost</a></li>
    <li><a href="http://www.ladyada.net/make/monochron/">MONOCHRON</a></li>
    <li><a href="http://www.ladyada.net/make/simreader/">SIM&nbsp;Reader</a></li>
	<li><a href="http://www.ladyada.net/make/spokepov/">SpokePOV</a></li>
	<li><a href="http://www.ladyada.net/make/tvbgone/">TV-B-Gone</a></li>
	<li><a href="http://www.ladyada.net/make/tweetawatt/">Tweet-a-Watt</a></li>
    <li><a href="http://www.ladyada.net/make/usbtinyisp/">USBtinyISP</a></li>
	<li><a href="http://www.ladyada.net/make/wavebubble/">Wave&nbsp;Bubble</a></li>
	<li><a href="http://www.ladyada.net/make/x0xb0x/">x0xb0x</a></li>
	<li><a href="http://www.ladyada.net/make/xbee/">XBee</a></li>
	<li><a href="http://www.ladyada.net/make/ybox2/">YBox2</a></li>
	<li><a href="http://www.ladyada.net/learn/breakoutplus/ds1307rtc.html#nogo">Quickies »<!--[if gte IE 7]><!--></a><!--<![endif]-->
	<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul>
    <li><a href="http://www.ladyada.net/make/usbgamepad/index.html">USB&nbsp;Gamepad</a></li>
	    <li><a href="http://www.ladyada.net/make/pumpkin/pumpkin.html">Halloween&nbsp;Pumpkin</a></li>
	    <li><a href="http://www.ladyada.net/make/vintagelight/index.html">Vintage&nbsp;Bike&nbsp;Lite</a></li>
	  	<li><a href="http://www.ladyada.net/make/sudc4kap/index.html">Kite&nbsp;Arial&nbsp;Photo</a></li>
	  	<li><a href="http://www.ladyada.net/make/bikestand/index.html">Bike&nbsp;Stand</a></li>
	  	<li><a href="http://www.ladyada.net/make/bikelite/index.html">LiIon&nbsp;Bike&nbsp;Lite</a></li>
     	<li><a href="http://www.ladyada.net/make/pogojig/index.html">Pogo&nbsp;Jib</a></li>
	  	<li><a href="http://www.ladyada.net/make/massprog/index.html">Mass&nbsp;Programming</a></li>
	  	<li><a href="http://www.ladyada.net/make/solarlipo/index.html">Solar&nbsp;LiPo&nbsp;Charging</a></li>
	  	<li><a href="http://www.ladyada.net/make/magstripe/index.html">Magstripe&nbsp;Reader</a></li>
	  	<li><a href="http://www.ladyada.net/make/solarlogger/index.html">Solar&nbsp;Tracker</a></li>
        <li><a href="http://www.ladyada.net/make/tronbag/">TRON&nbsp;Bag</a></li>
	  </ul><!--[if lte IE 6]></td></tr></table></a><![endif]-->
      </li>
   	<li><a href="http://www.ladyada.net/make/">More...</a></li>
	<li><a href="http://www.instructables.com/member/ladyada/">-&gt;Instructables</a></li>
</ul>
<!--[if lte IE 6]></td></tr></table></a><![endif]-->
</li>

<li><a href="http://www.ladyada.net/learn/">Learn<!--[if gte IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
<ul>
	<li><a href="http://www.ladyada.net/learn/arduino/">Arduino&nbsp;tutorial</a></li>
	<li><a href="http://www.ladyada.net/learn/avr/">AVR&nbsp;tutorial</a></li>
	<li><a href="http://www.ladyada.net/learn/barcodescan/">Barcode&nbsp;scanners</a></li>
	<li><a href="http://www.ladyada.net/learn/el-wire/">EL&nbsp;Wire&nbsp;tutorial</a></li>
	<li><a href="http://www.ladyada.net/learn/lcd/">LCDs</a></li>
	<li><a href="http://www.ladyada.net/learn/arduino/LEDs.html">LEDs</a></li>
	<li><a href="http://www.ladyada.net/learn/multimeter/">Multimeter&nbsp;tutorial</a></li>
   	<li><a href="http://www.ladyada.net/learn/scale/">Digital&nbsp;scales</a></li>
    <li><a href="http://www.ladyada.net/learn/sensors/">Sensors »<!--[if gte IE 7]><!--></a><!--<![endif]-->
	<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul>
    	<li><a href="http://www.ladyada.net/learn/sensors/fsr.html">FSR</a></li>
	    <li><a href="http://www.ladyada.net/learn/sensors/cds.html">CdS&nbsp;Photocell</a></li>
	    <li><a href="http://www.ladyada.net/learn/sensors/tmp36.html">Temperature</a></li>
	  	<li><a href="http://www.ladyada.net/learn/sensors/tilt.html">Tilt</a></li>
	  	<li><a href="http://www.ladyada.net/learn/sensors/pir.html">PIR</a></li>
        <li><a href="http://www.ladyada.net/learn/sensors/thermocouple.html">Thermocouple</a></li>
        <li><a href="http://www.ladyada.net/learn/sensors/ir.html">IR&nbsp;Receiver</a></li>
	  </ul>
	<!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>
        <li><a href="http://www.ladyada.net/learn/breakoutplus/">Breakout boards »<!--[if gte IE 7]><!--></a><!--<![endif]-->
	<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul>
    	<li><a href="./DS1307 RTC tutorial_files/DS1307 RTC tutorial.html">DS1307&nbsp;RTC</a></li>
        <li><a href="http://www.ladyada.net/learn/sensors/thermocouple.html">MAX6675</a></li>
        <li><a href="http://www.ladyada.net/learn/products/atmega32u4breakout/">ATmega32u4&nbsp;Breakout+</a></li>
	  </ul>
	<!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>
  
          <li><a href="http://www.ladyada.net/products/">Products »<!--[if gte IE 7]><!--></a><!--<![endif]-->
	<!--[if lte IE 6]><table><tr><td><![endif]-->
	<ul>
     <li><a href="http://www.ladyada.net/learn/products/i2cspilcdbackpack/">i2c/SPI&nbsp;LCD&nbsp;backpack</a></li>
     <li><a href="http://www.ladyada.net/learn/products/usbboarduino/">USB&nbsp;Boarduino</a></li>
     <li><a href="http://www.ladyada.net/learn/products/atmega32u4breakout/">ATmega32u4&nbsp;Breakout+</a></li>
     <li><a href="http://www.ladyada.net/learn/products/tfttouchbreakout/">2.8&nbsp;TFT&nbsp;touchscreen</a></li>
     <li><a href="http://www.ladyada.net/learn/products/18tftbreakout/">1.8&nbsp;SPI&nbsp;TFT&nbsp;</a></li>
     <li><a href="http://www.ladyada.net/learn/products/rfidnfc/">RFID/NFC</a></li>
     	  </ul>
	<!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>
      
	<li><a href="http://www.ladyada.net/learn/chumby/">Chumby&nbsp;Hacker&nbsp;Board</a></li>
	<li><a href="http://www.ladyada.net/learn/soldering/">Soldering&nbsp;tutorial</a></li>
	<li><a href="http://www.ladyada.net/learn/powersupply/">Power&nbsp;Supply&nbsp;tutorial</a></li>
    <li><a href="http://www.ladyada.net/learn/electroknit/">Brother&nbsp;KH-9033&nbsp;tutorial</a></li>
	<li><a href="http://www.ladyada.net/learn/diykinect/">USB&nbsp;reverse-engineering&nbsp;tutorial</a></li>
    <li><a href="http://www.ladyada.net/learn/calipers/">Calipers&nbsp;tutorial</a></li>
    <li><a href="http://www.ladyada.net/products/rgbledstrip/">RGB&nbsp;LED&nbsp;Strips</a></li>
    <li><a href="http://www.ladyada.net/products/rgbledpixels/">RGB&nbsp;LED&nbsp;Pixels</a></li>
    <li><a href="http://www.ladyada.net/learn/lipoly/">LiIon&nbsp;&amp;&nbsp;LiPoly&nbsp;Batteries</a></li>
</ul>
<!--[if lte IE 6]></td></tr></table></a><![endif]-->
</li>

	
<li><a href="http://www.ladyada.net/library/">Library<!--[if gte IE 7]><!--></a><!--<![endif]-->
<!--[if lte IE 6]><table><tr><td><![endif]-->
<ul>	
	<li><a href="http://www.ladyada.net/library/arduino/">Arduino&nbsp;Hacks</a></li>
    <li><a href="http://www.ladyada.net/library/batteries.html">Batteries</a></li>
	<li><a href="http://www.ladyada.net/library/diyboostcalc.html">Boost&nbsp;Calc</a></li>
    <li><a href="http://www.ladyada.net/library/equipt/">E.E.&nbsp;Tools</a></li>
	<li><a href="http://www.ladyada.net/library/hackcomputer.html">E.E.&nbsp;Computer</a></li>
    <li><a href="http://www.ladyada.net/library/procure/">Find&nbsp;Parts</a></li>
	<li><a href="http://www.ladyada.net/library/kits/">Kits</a></li>
	<li><a href="http://www.ladyada.net/library/laser/">Laser</a></li>
	<li><a href="http://www.ladyada.net/library/ucannoyances.html">uC Annoyances</a></li>
	<li><a href="http://www.ladyada.net/library/openhardware/">Open Source Hardware</a></li>
	<li><a href="http://www.ladyada.net/library/pcb/">PCB&nbsp;Design&nbsp;&amp;&nbsp;Tips</a></li>
	<li><a href="http://www.ladyada.net/library/picvsavr.html">PIC&nbsp;vs.&nbsp;AVR</a></li>
	<li><a href="http://www.ladyada.net/library/software/index.html">Software</a></li>
	<li><a href="http://www.ladyada.net/library/smt/index.html">SMT</a></li>
        <li><a href="http://www.ladyada.net/library/zencart/">Zen-Cart&nbsp;Mods</a></li>
</ul>
<!--[if lte IE 6]></td></tr></table></a><![endif]-->
</li>

<li><a href="http://www.adafruit.com/blog/">Blog</a></li>

<li><a href="http://www.adafruit.com/" target="_blank">Store</a></li>

<li><a href="http://forums.adafruit.com/" target="_blank">Forums</a></li>

</ul>

<div id="searchbox">
<!-- Google CSE Search Box Begins -->
<form id="searchbox_012941403977924873237:omv8mprm6ek" action="http://www.google.com/cse" target="_top"> <input type="hidden" name="cx" value="012941403977924873237:omv8mprm6ek"> <input name="q" type="text" size="23" style="background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat; "><br> <span class="style1">ladyada.net</span> <input type="submit" name="sa" value="Search"> <input type="hidden" name="cof" value="FORID:0"> <input name="siteurl" type="hidden" value="www.ladyada.net/learn/breakoutplus/ds1307rtc.html"><input name="ref" type="hidden" value="www.google.nl/url?sa=t&amp;rct=j&amp;q=ds1307%20arduino&amp;source=web&amp;cd=1&amp;ved=0CCwQFjAA&amp;url=http%3A%2F%2Fwww.ladyada.net%2Flearn%2Fbreakoutplus%2Fds1307rtc.html&amp;ei=eVpeT4DJCcaeOo_D3YEN&amp;usg=AFQjCNGaPPfMK0kTsrShQS5tkUm8KlXPNw&amp;cad=rja"></form><script type="text/javascript" src="./DS1307 RTC tutorial_files/brand"></script>
<!-- Google CSE Search Box Ends -->
</div>

<div id="lefttcol">
<!-- this is just a buffer -->
</div>

<div id="content">
  <!-- InstanceBeginRepeat name="texts" --><!-- InstanceEndRepeat --> <div class="wikiinclude">
<!-- InstanceBeginEditable name="wikispace" --><script language="Javascript" src="./DS1307 RTC tutorial_files/show.php"></script>
<h3 class="sectionedit1"><a name="what_is_an_rtc" id="what_is_an_rtc">What is an RTC?</a> </h3>
<div class="level3">

<p>
A real time clock is basically just like a watch - it runs on a battery and keeps time for you even when there is a power outage! Using an RTC, you can keep track of long timelines, even if you reprogram your microcontroller or disconnect it from USB or a power plug.
</p>

<p>
Most microcontrollers, including the Arduino,  have a built-in timekeeper called<strong> millis()</strong> and there are also timers built into the chip that can keep track of longer time periods like minutes or days. So why would you want to have a seperate RTC chip? Well, the biggest reason is that <strong>millis()</strong> only keeps track of time <em>since the Arduino was last powered<strong> - </strong></em>. That means that when the power is turned on, the millisecond timer is set back to 0. The Arduino doesn't know that it's 'Tuesday' or 'March 8th', all it can tell is 'It's been 14,000 milliseconds since I was last turned on'. 
</p>

<p>
OK so what if you wanted to set the time on the Arduino? You'd have to program in the date and time and you could have it count from that point on. But if it lost power, you'd have to reset the time. Much like very cheap alarm clocks: every time they lose power they blink <strong>12:00</strong>
</p>

<p>
While this sort of basic timekeeping is OK for some projects, some projects such as data-loggers, clocks, etc will need to have <strong>consistent timekeeping that doesn't reset when the Arduino battery dies or is reprogrammed</strong>. Thus, we include a seperate RTC! The RTC chip is a specialized chip that just keeps track of time. It can count leap-years and knows how many days are in a month, but it doesn't take care of Daylight Savings Time (because it changes from place to place)
</p>

<p>
<a href="http://en.wikipedia.org/wiki/File:Realtimeclock_Motherboard_Baby_AT_crop.jpg" class="media" title="http://en.wikipedia.org/wiki/File:Realtimeclock_Motherboard_Baby_AT_crop.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch.php" class="mediacenter" alt="" width="314" height="241"></a> 
</p><div class="center"><p> <em>This image shows a computer motherboard with a Real Time Clock called the <a href="http://www.maxim-ic.com/app-notes/index.mvp/id/503" class="urlextern" title="http://www.maxim-ic.com/app-notes/index.mvp/id/503" rel="nofollow">DS1387</a> . There's a lithium battery in there which is why it's so big.</em></p></div>

<p>
The RTC we'll be using is the<a href="http://www.ladyada.net/wiki/partselector/ic#rtc" class="urlextern" title="http://www.ladyada.net/wiki/partselector/ic#rtc" rel="nofollow"> DS1307</a> . It's low cost, easy to solder, and can run for years on a very small coin cell.
</p>

<p>
<a href="http://www.ladyada.net/images/parts/ds1307.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/ds1307.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(1).php" class="mediacenter" alt="" width="150" height="120"></a> 
</p>

<p>
As long as it has a coin cell to run it, the DS1307 will merrily tick along for a long time, even when the Arduino loses power, or is reprogrammed. 
</p>

<div class="warning"><p>
<strong>You MUST have a coin cell installed for the RTC to work, if there is no coin cell, you should pull the battery pin low.</strong>
</p></div>

</div>
<!-- EDIT1 SECTION "What is an RTC?" [1-2681] -->
<h3 class="sectionedit2"><a name="files" id="files">Files</a> </h3>
<div class="level3">

<p>
<a href="http://github.com/adafruit/DS1307-breakout-board" class="urlextern" title="http://github.com/adafruit/DS1307-breakout-board" rel="nofollow">Schematic and layout files can be found at GitHub - click Download Source to get the zip!</a> 
</p>

</div>
<!-- EDIT2 SECTION "Files" [2682-2845] -->
<h3 class="sectionedit3"><a name="parts" id="parts">Parts</a> </h3>
<div class="level3">

<div class="table">
<div class="table sectionedit4"><table class="inline">
	<tbody><tr class="row0">
		<th class="col0">Image</th><th class="col1">Name</th><th class="col2">Description</th><th class="col3">Part information</th><th class="col4">Qty</th>
	</tr>
	<tr class="row1">
		<td class="col0"><a href="http://www.ladyada.net/images/parts/ds1307.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/ds1307.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(1).php" class="mediacenter" alt="" width="150" height="120"></a> </td><td class="col1"><strong>IC2</strong></td><td class="col2"> Real time clock</td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/ic?s[]=ds1307#rtc" class="urlextern" title="http://www.ladyada.net/wiki/partselector/ic?s[]=ds1307#rtc" rel="nofollow">DS1307</a> </td><td class="col4">1</td>
	</tr>
	<tr class="row2">
		<td class="col0"><a href="http://www.ladyada.net/images/parts/crystalcyl.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/crystalcyl.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(2).php" class="mediacenter" alt="" width="199" height="130"></a> </td><td class="col1"><strong>Q1</strong></td><td class="col2">32.768 KHz, 12.5 pF watch crystal</td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/crystals?s[]=32.768%20khz#crystals" class="urlextern" title="http://www.ladyada.net/wiki/partselector/crystals?s[]=32.768 khz#crystals" rel="nofollow">Generic 32.768KHz crystal</a> </td><td class="col4">1</td>
	</tr>
	<tr class="row3">
		<td class="col0"><img src="./DS1307 RTC tutorial_files/fetch(3).php" class="mediacenter" alt="" width="61" height="87"><img src="./DS1307 RTC tutorial_files/fetch(4).php" class="mediacenter" alt="" width="10" height="87"><img src="./DS1307 RTC tutorial_files/fetch(4).php" class="mediacenter" alt="" width="10" height="87"><img src="./DS1307 RTC tutorial_files/fetch(4).php" class="mediacenter" alt="" width="10" height="87"><img src="./DS1307 RTC tutorial_files/fetch(5).php" class="mediacenter" alt="" width="8" height="87"><img src="./DS1307 RTC tutorial_files/fetch(6).php" class="mediacenter" alt="" width="10" height="87"><img src="./DS1307 RTC tutorial_files/fetch(7).php" class="mediacenter" alt="" width="66" height="87"></td><td class="col1"><strong>R1, R2</strong></td><td class="col2">1/4W 5% 2.2K resistor <br>
Red, Red, Red, Gold </td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/resistors#w_5_carbon" class="urlextern" title="http://www.ladyada.net/wiki/partselector/resistors#w_5_carbon" rel="nofollow">Generic</a> </td><td class="col4">2</td>
	</tr>
	<tr class="row4">
		<td class="col0"><a href="http://www.ladyada.net/images/parts/104cerm.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/104cerm.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(8).php" class="mediacenter" alt="" width="154" height="200"></a> </td><td class="col1"><strong>C1</strong></td><td class="col2">0.1uF ceramic capacitor (104) </td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/caps?s[]=0.1uf%20%2F%2050v#ceramic_capacitors" class="urlextern" title="http://www.ladyada.net/wiki/partselector/caps?s[]=0.1uf%20%2F%2050v#ceramic_capacitors" rel="nofollow">Generic</a> </td><td class="col4">1</td>
	</tr>
	<tr class="row5">
		<td class="col0" colspan="2"><a href="http://www.ladyada.net/images/parts/headerm36.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/headerm36.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(9).php" class="mediacenter" alt="" width="200" height="84"></a> </td><td class="col2">5 pin male header (1x5) </td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/header#male_header" class="urlextern" title="http://www.ladyada.net/wiki/partselector/header#male_header" rel="nofollow">Generic</a> </td><td class="col4">1</td>
	</tr>
	<tr class="row6">
		<td class="col0"><a href="http://www.ladyada.net/images/parts/CR2032.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/CR2032.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(10).php" class="mediacenter" alt="" width="150" height="79"></a> </td><td class="col1"><strong>BATT</strong></td><td class="col2">12mm 3V lithium coin cell</td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/batteries#coin" class="urlextern" title="http://www.ladyada.net/wiki/partselector/batteries#coin" rel="nofollow"> CR1220</a> </td><td class="col4">1</td>
	</tr>
	<tr class="row7">
		<td class="col0"><a href="http://www.ladyada.net/images/parts/cr1220thm.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/parts/cr1220thm.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(11).php" class="mediacenter" alt="" width="130" height="105"></a> </td><td class="col1"><strong>BATT'</strong></td><td class="col2">12mm coin cell holder</td><td class="col3"><a href="http://www.ladyada.net/wiki/partselector/powerconn#battery_holders" class="urlextern" title="http://www.ladyada.net/wiki/partselector/powerconn#battery_holders" rel="nofollow">Keystone 3001</a> </td><td class="col4">1</td>
	</tr>
	<tr class="row8">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/ds1307bb.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/ds1307bb.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(12).php" class="mediacenter" alt="" width="169" height="130"></a> </td><td class="col1"><strong>PCB</strong></td><td class="col2">Circuit board</td><td class="col3"><a href="http://www.adafruit.com/" class="urlextern" title="http://www.adafruit.com" rel="nofollow">Adafruit Industries </a> </td><td class="col4">1</td>
	</tr>
</tbody></table></div>
<!-- EDIT4 TABLE [2877-5217] -->
</div>

</div>
<!-- EDIT3 SECTION "Parts" [2846-5229] -->
<h3 class="sectionedit5"><a name="assemble" id="assemble">Assemble!</a> </h3>
<div class="level3">
<div class="table sectionedit6"><table class="inline">
	<tbody><tr class="row0">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/ready.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/ready.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(13).php" class="mediacenter" alt="" width="500" height="385"></a> </td><td class="col1">Prepare to assemble the kit by checking the parts list and verifying you have everything! <br>
Next, heat up your soldering iron and clear off your desk. <br>
Place the circuit board in a vise so that you can easily work on it</td>
	</tr>
	<tr class="row1">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/bumpsolder.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/bumpsolder.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(14).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/bumped.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/bumped.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(15).php" class="mediacenter" alt="" width="500" height="385"></a> </td><td class="col1">Begin by soldering a small bump onto the negative pad of the battery: this will make better contact!</td>
	</tr>
	<tr class="row2">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/resplace.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/resplace.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(16).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/allpalce.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/allpalce.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(17).php" class="mediacenter" alt="" width="500" height="385"></a> </td><td class="col1">place the two 2.2K resistors, and the ceramic capacitor. They are symmetric so no need to worry about direction. <br>
Then place the crystal (also symmetric), the battery holder (goes on so that the battery can slip in the side) and the RTC chip.  <br>
The RTC chip must be placed so that the notch/dot on the end match the silkscreen. Look at the photo on the left, the notch is pointing down. Double check this before soldering in the chip because its quite hard to undo!</td>
	</tr>
	<tr class="row3">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/tack.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/tack.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(18).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/flip.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/flip.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(19).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/solder.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/solder.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(20).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/soldered.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/soldered.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(21).php" class="mediacenter" alt="" width="500" height="385"></a> </td><td class="col1">To keep the battery holder from falling out, you may want to 'tack' solder it from the top <br>
Then flip over the board and solder all the pins.</td>
	</tr>
	<tr class="row4">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/clip.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/clip.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(22).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/clipped.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/clipped.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(23).php" class="mediacenter" alt="" width="500" height="385"></a> </td><td class="col1">Clip the leads of the resistors, crystal and capacitor short.</td>
	</tr>
	<tr class="row5">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/header.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/header.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(24).php" class="mediacenter" alt="" width="500" height="385"></a>  <br>
<a href="http://www.ladyada.net/images/ds1307/headered.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/headered.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(25).php" class="mediacenter" alt="" width="500" height="385"></a>  </td><td class="col1">If you'd like to use the header to plug the breakout board into something, place the header in a breadboard, long side down and place the board so that the short pins stick thru the pads. <br>
Solder them in place.</td>
	</tr>
	<tr class="row6">
		<td class="col0"><a href="http://www.ladyada.net/images/ds1307/batt.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/batt.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(26).php" class="mediacenter" alt="" width="500" height="385"></a> </td><td class="col1">Insert the battery so that the flat + side is UP. <em> The battery will last for many years, 5 or more, so no need to ever remove or replace it. </em> <strong>You MUST have a coin cell installed for the RTC to work, if there is no coin cell, it will act strangly and possibly hang the Arduino so ALWAYS make SURE there's a battery installed, even if its a dead battery.</strong></td>
	</tr>
</tbody></table></div>
<!-- EDIT6 TABLE [5252-8617] -->
</div>
<!-- EDIT5 SECTION "Assemble!" [5230-8618] -->
<h3 class="sectionedit7"><a name="arduino_library" id="arduino_library">Arduino library</a> </h3>
<div class="level3">

<p>
Any 5V microcontroller with I2C built-in can easily use the DS1307. We will demonstrate how to use it with an Arduino since it is a popular microcontroller platform. 
</p>

<p>
For the RTC library, we'll be using a fork of JeeLab's excellent RTC library <a href="http://github.com/adafruit/RTClib" class="urlextern" title="http://github.com/adafruit/RTClib" rel="nofollow">RTClib </a> - a library for getting and setting time from a DS1307 (originally written by JeeLab, our version is slightly different so please <strong>only use ours </strong>to make sure its compatible!) - download the .zip by clicking on <strong>Download Source</strong> (top right) and rename the uncompressed folder RTClib <a href="http://www.ladyada.net/library/arduino/libraries.html" class="urlextern" title="http://www.ladyada.net/library/arduino/libraries.html" rel="nofollow">Then install it in your Arduino directory</a>  in a folder called <strong>RTClib</strong>
</p>

</div>
<!-- EDIT7 SECTION "Arduino library" [8619-9354] -->
<h3 class="sectionedit8"><a name="wiring_it_up" id="wiring_it_up">Wiring it up!</a> </h3>
<div class="level3">

<p>
There are only 5 pins: <strong>5V GND SCL SDA SQW</strong>. 
</p>
<ul>
<li class="level1"><div class="li"><strong>5V </strong>is used to power to the RTC chip when you want to query it for the time. If there is no 5V signal, the chip goes to sleep using the coin cell for backup. </div>
</li>
<li class="level1"><div class="li"><strong>GND</strong> is common ground and is required</div>
</li>
<li class="level1"><div class="li"><strong>SCL </strong>is the i2c clock pin - its required to talk to the RTC</div>
</li>
<li class="level1"><div class="li"><strong>SDA</strong> is the i2c data pin - its required to talk to the RTC</div>
</li>
<li class="level1"><div class="li"><strong>SQW</strong> is the optional square-wave output you can get from the RTC if you have configured it to do so. Most people don't need or use this pin<a href="http://www.ladyada.net/images/ds1307/breadboard.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/breadboard.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(27).php" class="mediacenter" alt="" width="500" height="389"></a> </div>
</li>
</ul>

<p>
If you set analog pin 3 (digital 17) to an OUTPUT and HIGH and analog pin 2 (digital 16) to an OUTPUT and LOW you can power the RTC directly from the pins!
</p>

<p>
<a href="http://www.ladyada.net/images/ds1307/quickplug.jpg" class="media hoverZoomLink" title="http://www.ladyada.net/images/ds1307/quickplug.jpg" rel="nofollow"><img src="./DS1307 RTC tutorial_files/fetch(28).php" class="mediacenter" alt="" width="500" height="385"></a> 
</p>

</div>
<!-- EDIT8 SECTION "Wiring it up!" [9355-10340] -->
<h3 class="sectionedit9"><a name="first_rtc_test" id="first_rtc_test">First RTC test</a> </h3>
<div class="level3">

<p>
The first thing we'll demonstrate is a test sketch that will read the time from the RTC once a second. We'll also show what happens if you remove the battery and replace it since that causes the RTC to halt. So to start, remove the battery from the holder while the Arduino is not powered or plugged into USB. Wait 3 seconds and then replace the battery. This resets the RTC chip. Now load up the following sketch (which is also found in<strong> Examples→RTClib→ds1307</strong>) and upload it to your Arduino with the datalogger shield on!
</p>
<pre class="code C"><span class="co1">// Date and time functions using a DS1307 RTC connected via I2C and Wire lib</span>
&nbsp;
<span class="co2">#include &lt;Wire.h&gt;</span>
<span class="co2">#include "RTClib.h"</span>
&nbsp;
RTC_DS1307 RTC<span class="sy0">;</span>
&nbsp;
<span class="kw4">void</span> setup <span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    Serial.<span class="me1">begin</span><span class="br0">(</span><span class="nu0">57600</span><span class="br0">)</span><span class="sy0">;</span>
    Wire.<span class="me1">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    RTC.<span class="me1">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">if</span> <span class="br0">(</span><span class="sy0">!</span> RTC.<span class="me1">isrunning</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="st0">"RTC is NOT running!"</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// following line sets the RTC to the date &amp; time this sketch was compiled</span>
    <span class="co1">//RTC.adjust(DateTime(__DATE__, __TIME__));</span>
  <span class="br0">}</span>
&nbsp;
<span class="br0">}</span>
&nbsp;
<span class="kw4">void</span> loop <span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    DateTime now <span class="sy0">=</span> RTC.<span class="me1">now</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">year</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">'/'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">month</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">'/'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">day</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">' '</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">hour</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">minute</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">second</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">" since 1970 = "</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">unixtime</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">"s = "</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">unixtime</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">/</span> <span class="nu0">86400L</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="st0">"d"</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// calculate a date which is 7 days and 30 seconds into the future</span>
    DateTime future <span class="br0">(</span>now.<span class="me1">unixtime</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">+</span> <span class="nu0">7</span> <span class="sy0">*</span> <span class="nu0">86400L</span> <span class="sy0">+</span> <span class="nu0">30</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">" now + 7d + 30s: "</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>future.<span class="me1">year</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">'/'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>future.<span class="me1">month</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">'/'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>future.<span class="me1">day</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">' '</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>future.<span class="me1">hour</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>future.<span class="me1">minute</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>future.<span class="me1">second</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    delay<span class="br0">(</span><span class="nu0">3000</span><span class="br0">)</span><span class="sy0">;</span>
<span class="br0">}</span></pre>

<p>
Now run the Serial terminal and make sure the baud rate is set correctly at 57600 bps
</p>

<p>
you should see the following:<img src="./DS1307 RTC tutorial_files/fetch(29).php" class="mediacenter" alt="" width="454" height="389">
</p>

<p>
Whenever the RTC chip loses all power (including the backup battery) it will report the time as 0:0:0 and it won't count seconds (its stopped). Whenever you set the time, this will kick start the clock ticking. So basically the upshot here is that you should never ever remove the battery once you've set the time. You shouldn't have to and the battery holder is very snug so unless the board is crushed, the battery wont 'fall out'
</p>

</div>
<!-- EDIT9 SECTION "First RTC test" [10341-13123] -->
<h3 class="sectionedit10"><a name="setting_the_time" id="setting_the_time">Setting the time</a> </h3>
<div class="level3">

<p>
With the same sketch loaded, uncomment the line that starts with <strong>RTC.adjust</strong> like so:
</p>
<pre class="code C">  <span class="co1">// following line sets the RTC to the date &amp; time this sketch was compiled</span>
  RTC.<span class="me1">adjust</span><span class="br0">(</span>DateTime<span class="br0">(</span>__DATE__<span class="sy0">,</span> __TIME__<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;</pre>

<p>
Thisline is very cute, what it does is take the Date and Time according the computer you're using (right when you compile the code) and uses that to program the RTC. If your computer time is not set right you should fix that first. Then you must press the <strong>Upload</strong> button to compile and then immediately upload. If you compile and then upload later, the clock will be off by that amount of time.
</p>

<p>
Then open up the Serial monitor window to show that the time has been set    <img src="./DS1307 RTC tutorial_files/fetch(30).php" class="mediacenter" alt="" width="459" height="398">From now on, you wont have to ever set the time again: the battery will last 5 or more years 
</p>

</div>
<!-- EDIT10 SECTION "Setting the time" [13124-14037] -->
<h3 class="sectionedit11"><a name="reading_the_time" id="reading_the_time">Reading the time</a> </h3>
<div class="level3">

<p>
Now that the RTC is merrily ticking away, we'll want to query it for the time. Lets look at the sketch again to see how this is done
</p>
<pre class="code C">&nbsp;
<span class="kw4">void</span> loop <span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    DateTime now <span class="sy0">=</span> RTC.<span class="me1">now</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">year</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">'/'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">month</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">'/'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">day</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">' '</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">hour</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">minute</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">':'</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">second</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">,</span> DEC<span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;</pre>

<p>
There's pretty much only one way to get the time using the RTClib, which is to call <strong>now()</strong>, a function that returns a DateTime object that describes the year, month, day, hour, minute and second when you called <strong>now()</strong>. 
</p>

<p>
There are some RTC libraries that instead have you call something like <strong>RTC.year()</strong> and <strong>RTC.hour()</strong> to get the current year and hour. However, there's one problem where if you happen to ask for the minute right at <strong>3:14:59</strong> just before the next minute rolls over, and then the second right after the minute rolls over (so at <strong>3:15:00</strong>) you'll see the time as <strong>3:14:00 </strong>which is a minute off. If you did it the other way around you could get <strong>3:15:59</strong> - so one minute off in the other direction. 
</p>

<p>
Because this is not an especially unlikely occurrence - particularly if you're querying the time pretty often - we take a 'snapshot' of the time from the RTC all at once and then we can pull it apart into <strong>day()</strong> or <strong>second()</strong> as seen above. Its a tiny bit more effort but we think its worth it to avoid mistakes!
</p>

<p>
We can also get a 'timestamp' out of the DateTime object by calling <strong>unixtime</strong> which counts the number of seconds (not counting leapseconds) since midnight, January 1st 1970
</p>
<pre class="code C">    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">" since 1970 = "</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">unixtime</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span><span class="st0">"s = "</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">print</span><span class="br0">(</span>now.<span class="me1">unixtime</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">/</span> <span class="nu0">86400L</span><span class="br0">)</span><span class="sy0">;</span>
    Serial.<span class="me1">println</span><span class="br0">(</span><span class="st0">"d"</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;</pre>

<p>
Since there are 60*60*24 = 86400 seconds in a day, we can easily count days since then as well. This might be useful when you want to keep track of how much time has passed since the last query, making some math a lot easier (like checking if its been 5 minutes later, just see if <strong>unixtime()</strong> has increased by 300, you dont have to worry about hour changes)
</p>

</div>
<!-- EDIT11 SECTION "Reading the time" [14038-] --><hr><br><em>This page was autogenerated from <a href="http://www.ladyada.net/wiki/tutorials/learn/breakoutplus/ds1307rtc.html" target="_blank">http://www.ladyada.net/wiki/tutorials/learn/breakoutplus/ds1307rtc.html</a> <br>Please edit the wiki to contribute any updates or corrections.</em><!-- InstanceEndEditable --></div></div>

<div id="rightcol">
<!-- this is just a buffer -->
</div>



<div id="history">
<!-- #BeginDate format:Am1m -->May 17, 2011  20:06<!-- #EndDate --></div>


<!-- InstanceEnd --><div class="ugdv_contextMenu" id="ugdv_myMenu" style="display: none; "><ul id="ugdv_contextMenu"><li id="ugdv_menuItem_google_docs">Open in Google Docs Viewer</li><li id="ugdv_menuItem_new_tab">Open link in new tab</li><li id="ugdv_menuItem_new_window">Open link in new window</li><li id="ugdv_menuItem_new_incognito">Open link in new incognito window</li><li class="ugdv_seperator"></li><li id="ugdv_menuItem_download_file">Download file</li><li id="ugdv_menuItem_copy">Copy link address</li><li id="ugdv_menuItem_editpdf">Edit PDF File on PDFescape.com</li></ul></div><div id="ugdv_jqContextMenu" style="display: none; position: absolute; z-index: 9999; "></div><div style="background-color: rgb(0, 0, 0); position: absolute; opacity: 0.2; z-index: 9998; display: none; "></div><div style="display: none; " id="hiddenlpsubmitdiv"></div><script>try{for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ d.innerText=i; } } d.dispatchEvent(customEvent); form.lpsubmitorig2(); } } }}catch(e){}</script></body></html>